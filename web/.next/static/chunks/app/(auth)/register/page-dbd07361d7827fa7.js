(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{8127:function(e,t,n){Promise.resolve().then(n.bind(n,3494))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},3494:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(7437),a=n(2265),s=n(6463),u=n(2800),o=n(4282),l=n(2108);function i(){let e=(0,s.useRouter)(),[t,n]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[p,f]=(0,a.useState)("user"),[h,x]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1);async function v(n){n.preventDefault(),x(null),b(!0);try{let{data:n}=await u.h.post("/auth/register",{name:t,email:i,password:d,accountType:p}),r={token:n.token,user:n.user};(0,o.K)(r),(0,u.u)(r.token),e.replace("/account")}catch(e){var r,a;x((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Registration failed")}finally{b(!1)}}return(0,r.jsxs)("main",{className:"container mx-auto max-w-md px-4 py-10",children:[(0,r.jsx)("h1",{className:"mb-4 text-2xl font-semibold",children:"Create account"}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",className:"w-full rounded-md border px-3 py-2",value:t,onChange:e=>n(e.target.value)}),(0,r.jsx)("input",{type:"email",placeholder:"Email",className:"w-full rounded-md border px-3 py-2",value:i,onChange:e=>c(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Password",className:"w-full rounded-md border px-3 py-2",value:d,onChange:e=>m(e.target.value),required:!0}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"radio",name:"accountType",checked:"user"===p,onChange:()=>f("user")}),"User"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"radio",name:"accountType",checked:"agent"===p,onChange:()=>f("agent")}),"Agent"]})]}),h&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:h}),(0,r.jsx)(l.z,{type:"submit",disabled:g,children:g?"Creatingâ€¦":"Sign up"})]})]})}},2108:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(7437),a=n(2265),s=n(4839),u=n(6164);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.m6)((0,s.W)(t))}let l=a.forwardRef((e,t)=>{let{className:n,variant:a="default",size:s="default",...u}=e;return(0,r.jsx)("button",{ref:t,className:o(o("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-black text-white hover:bg-black/90",outline:"border border-input bg-transparent hover:bg-gray-50",ghost:"hover:bg-gray-100"}[a],{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}[s]),n),...u})});l.displayName="Button"},2800:function(e,t,n){"use strict";n.d(t,{h:function(){return s},u:function(){return u}});var r=n(8472),a=n(357);let s=r.Z.create({baseURL:a.env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",withCredentials:!0});function u(e){e?s.defaults.headers.common.Authorization="Bearer ".concat(e):delete s.defaults.headers.common.Authorization}},4282:function(e,t,n){"use strict";n.d(t,{G:function(){return a},K:function(){return s}});let r="session";function a(){try{let e=localStorage.getItem(r);return e?JSON.parse(e):null}catch(e){return null}}function s(e){e?localStorage.setItem(r,JSON.stringify(e)):localStorage.removeItem(r)}}},function(e){e.O(0,[472,868,971,23,744],function(){return e(e.s=8127)}),_N_E=e.O()}]);