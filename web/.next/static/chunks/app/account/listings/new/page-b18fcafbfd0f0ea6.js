(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{3775:function(e,t,a){Promise.resolve().then(a.bind(a,1704))},6463:function(e,t,a){"use strict";var l=a(1169);a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}})},1704:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var l=a(7437),n=a(2265),s=a(6463),r=a(2800),i=a(4282),o=a(2108);function u(){let e=(0,s.useRouter)(),t=(0,i.G)();t&&(0,r.u)(t.token);let[a,u]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[j,y]=(0,n.useState)(""),[N,S]=(0,n.useState)(""),[w,C]=(0,n.useState)(null),[k,P]=(0,n.useState)(null),[_,I]=(0,n.useState)(!1);async function O(t){t.preventDefault(),I(!0),P(null);try{let t=new FormData;t.append("title",a),t.append("description",d),""!==m&&t.append("price",String(m)),t.append("contact",JSON.stringify({city:x,phone:f})),t.append("stats",JSON.stringify({gender:b})),j&&t.append("planType",j),N&&t.append("planCities",N),w&&Array.from(w).forEach(e=>t.append("images",e));let{data:l}=await r.h.post("/listings",t,{headers:{"Content-Type":"multipart/form-data"}});e.replace("/account/listings")}catch(e){var l,n;P((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Failed to create listing")}finally{I(!1)}}return(0,l.jsxs)("div",{className:"container mx-auto max-w-3xl px-4 py-6",children:[(0,l.jsx)("h1",{className:"mb-4 text-xl font-semibold",children:"Add Listing"}),(0,l.jsxs)("form",{onSubmit:O,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Title"}),(0,l.jsx)("input",{className:"w-full rounded-md border px-3 py-2",value:a,onChange:e=>u(e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Description"}),(0,l.jsx)("textarea",{className:"w-full rounded-md border px-3 py-2",rows:6,value:d,onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Price"}),(0,l.jsx)("input",{type:"number",className:"w-full rounded-md border px-3 py-2",value:m,onChange:e=>p(e.target.value?Number(e.target.value):"")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"City"}),(0,l.jsx)("input",{className:"w-full rounded-md border px-3 py-2",value:x,onChange:e=>h(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Phone"}),(0,l.jsx)("input",{className:"w-full rounded-md border px-3 py-2",value:f,onChange:e=>g(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Gender"}),(0,l.jsxs)("select",{className:"w-full rounded-md border px-3 py-2",value:b,onChange:e=>v(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select"}),(0,l.jsx)("option",{value:"female",children:"Female"}),(0,l.jsx)("option",{value:"male",children:"Male"}),(0,l.jsx)("option",{value:"trans",children:"Trans"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Plan Type"}),(0,l.jsxs)("select",{className:"w-full rounded-md border px-3 py-2",value:j,onChange:e=>y(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"None"}),(0,l.jsx)("option",{value:"featured",children:"Featured"}),(0,l.jsx)("option",{value:"premium",children:"Premium"}),(0,l.jsx)("option",{value:"vip",children:"VIP (Homepage)"})]})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Plan Cities (comma-separated)"}),(0,l.jsx)("input",{className:"w-full rounded-md border px-3 py-2",value:N,onChange:e=>S(e.target.value)})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"mb-1 block text-sm text-gray-600",children:"Images"}),(0,l.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>C(e.target.files)})]}),k&&(0,l.jsx)("div",{className:"md:col-span-2 text-sm text-red-600",children:k}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(o.z,{type:"submit",disabled:_,children:_?"Creatingâ€¦":"Create"})})]})]})}},2108:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var l=a(7437),n=a(2265),s=a(4839),r=a(6164);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}let o=n.forwardRef((e,t)=>{let{className:a,variant:n="default",size:s="default",...r}=e;return(0,l.jsx)("button",{ref:t,className:i(i("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-black text-white hover:bg-black/90",outline:"border border-input bg-transparent hover:bg-gray-50",ghost:"hover:bg-gray-100"}[n],{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}[s]),a),...r})});o.displayName="Button"},2800:function(e,t,a){"use strict";a.d(t,{h:function(){return s},u:function(){return r}});var l=a(8472),n=a(357);let s=l.Z.create({baseURL:n.env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",withCredentials:!0});function r(e){e?s.defaults.headers.common.Authorization="Bearer ".concat(e):delete s.defaults.headers.common.Authorization}},4282:function(e,t,a){"use strict";a.d(t,{G:function(){return n},K:function(){return s}});let l="session";function n(){try{let e=localStorage.getItem(l);return e?JSON.parse(e):null}catch(e){return null}}function s(e){e?localStorage.setItem(l,JSON.stringify(e)):localStorage.removeItem(l)}}},function(e){e.O(0,[472,868,971,23,744],function(){return e(e.s=3775)}),_N_E=e.O()}]);