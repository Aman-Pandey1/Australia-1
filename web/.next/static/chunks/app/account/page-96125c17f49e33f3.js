(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{7244:function(e,n,t){Promise.resolve().then(t.bind(t,4237))},6463:function(e,n,t){"use strict";var l=t(1169);t.o(l,"useRouter")&&t.d(n,{useRouter:function(){return l.useRouter}})},4237:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var l=t(7437),s=t(2265),a=t(7138),r=t(6463),o=t(4282),i=t(2800);function c(){var e;let n=(0,r.useRouter)(),[t,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)((null===(e=(0,o.G)())||void 0===e?void 0:e.user)||null);(0,s.useEffect)(()=>{let e=(0,o.G)();if(!e){n.replace("/login");return}(0,i.u)(e.token),d(e.user)},[n]);let m=(0,s.useMemo)(()=>[{href:"/account/profile",label:"My Profile"},{href:"/account/subscription",label:"Subscription"},...(null==u?void 0:u.accountType)==="agent"?[{href:"/account/listings",label:"My Listings"},{href:"/account/listings/new",label:"Add Listing"}]:[],...(null==u?void 0:u.role)==="admin"?[{href:"/admin",label:"Admin Panel"}]:[]],[u]);async function h(){try{await i.h.post("/auth/logout")}catch(e){}(0,o.K)(null),(0,i.u)(void 0),n.replace("/login")}return(0,l.jsxs)("div",{className:"container mx-auto grid grid-cols-12 gap-6 px-4 py-6",children:[(0,l.jsx)("aside",{className:"col-span-12 md:col-span-3 ".concat(t?"":"hidden md:block"),children:(0,l.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Signed in as"}),(0,l.jsx)("p",{className:"font-medium",children:(null==u?void 0:u.name)||(null==u?void 0:u.email)}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[null==u?void 0:u.accountType,(null==u?void 0:u.role)==="admin"?" \xb7 admin":""]})]}),(0,l.jsxs)("nav",{className:"space-y-2",children:[m.map(e=>(0,l.jsx)(a.default,{href:e.href,className:"block rounded-md px-3 py-2 hover:bg-gray-100",children:e.label},e.href)),(0,l.jsx)("button",{onClick:h,className:"mt-2 w-full rounded-md border px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Logout"})]})]})}),(0,l.jsx)("main",{className:"col-span-12 md:col-span-9",children:(0,l.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Account"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Choose an item from the sidebar."})]})})]})}},2800:function(e,n,t){"use strict";t.d(n,{h:function(){return a},u:function(){return r}});var l=t(8472),s=t(357);let a=l.Z.create({baseURL:s.env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",withCredentials:!0});function r(e){e?a.defaults.headers.common.Authorization="Bearer ".concat(e):delete a.defaults.headers.common.Authorization}},4282:function(e,n,t){"use strict";t.d(n,{G:function(){return s},K:function(){return a}});let l="session";function s(){try{let e=localStorage.getItem(l);return e?JSON.parse(e):null}catch(e){return null}}function a(e){e?localStorage.setItem(l,JSON.stringify(e)):localStorage.removeItem(l)}}},function(e){e.O(0,[472,138,971,23,744],function(){return e(e.s=7244)}),_N_E=e.O()}]);